{"version":3,"sources":["components/Filter.js","components/PersonForm.js","services/Route.js","components/Person.js","components/Persons.js","components/Message.js","App.js","index.js"],"names":["Filter","field","handleField","type","value","onChange","PersonForm","text","changeFn","required","baseUrl","services","getAll","axios","get","then","response","data","create","newObject","post","update","id","put","remove","delete","Person","person","setPersons","persons","name","number","onClick","window","confirm","personR","console","log","filter","n","Persons","fn","array","map","Message","message","className","class","App","useState","newName","setNewName","newNum","setNewNum","setField","intialMessage","setMessage","useEffect","filterPersons","toLowerCase","includes","e","target","onSubmit","preventDefault","tempName","some","eUser","find","uUser","u","catch","err","status","fail","error","setTimeout","success","newPerson","concat","inValid","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2808088e.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({ field, handleField }) => {\r\n    return (\r\n        <div>\r\n            <input type='text' value={field} onChange={handleField} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter\r\n","import React from 'react'\r\n\r\nconst PersonForm = ({ text, value, changeFn }) => {\r\n    return (\r\n        <div>\r\n            {text} <input type='text' value={value} onChange={changeFn} required />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PersonForm\r\n","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n//  https://fierce-basin-11015.herokuapp.com/api/persons/\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\nconst remove = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\nconst services = { getAll, create, update, remove }\r\nexport default services\r\n","import React from 'react'\r\nimport services from '../services/Route'\r\nconst Person = ({ person, setPersons, persons }) => {\r\n    const delPerson = () => {\r\n\r\n        if (window.confirm(`Delete ${person.name}`)) {\r\n            services.remove(person.id)\r\n                .then(personR => console.log(personR))\r\n            setPersons(persons.filter(n => n.id !== person.id))\r\n        }\r\n\r\n    }\r\n    return (\r\n\r\n        <div key={person.name}>\r\n            {person.name}  {person.number} <button onClick={() => { delPerson() }}>delete</button>\r\n        </div >\r\n\r\n    )\r\n}\r\n\r\nexport default Person\r\n","import React from 'react'\r\nimport Person from './Person'\r\nconst Persons = ({ filter, fn, array }) => {\r\n    return (\r\n        <div>\r\n            {\r\n                filter.map(person => {\r\n                    return (\r\n                        <Person key={person.name} setPersons={fn} persons={array} person={person} />\r\n                    )\r\n                })\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Persons\r\n","import React from 'react'\r\n\r\nconst Message = ({ message }) => {\r\n\r\n    if (message.text === null) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className={message.class}>\r\n            {message.text}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Message\r\n","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport services from './services/Route'\nimport Message from './components/Message'\nconst App = () => {\n\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNum, setNewNum] = useState('')\n  const [field, setField] = useState('')\n  const intialMessage = {\n    text: null,\n    class: \"message\"\n  }\n  const [message, setMessage] = useState(intialMessage)\n\n  useEffect(() => {\n    console.log('effect')\n    services.getAll()\n      .then(persons => {\n        setPersons(persons)\n      })\n  }, [])\n\n  const handleName = (e) => {\n    setNewName(e.target.value)\n\n  }\n  const handleNum = (e) => {\n    setNewNum(e.target.value)\n  }\n\n  const handleField = (e) => {\n    setField(e.target.value)\n  }\n\n  const addPerson = (e) => {\n    e.preventDefault()\n\n    const tempName = {\n      name: newName,\n      number: newNum\n    }\n\n    if (persons.some(person => person.name === newName)) {\n      const eUser = persons.find(person => person.name === newName)\n      if (window.confirm(`Update  ${eUser.name}'s number`)) {\n        const uUser = { ...eUser, number: newNum }\n        services.update(uUser.id, uUser)\n          .then(person => {\n            console.log(\"update:\", person)\n            const update = persons.map(u => (u.id === uUser.id ? uUser : u))\n            setPersons(update)\n          })\n          .catch(err => {\n            const fail = {\n              text: `the user was already deleted from server`,\n              class: \"messageF\"\n            }\n\n            if (err.response.status === 403) {\n              const fail = {\n                text: err.response.data.error,\n                class: \"messageF\"\n              }\n              setMessage(fail)\n              setTimeout(() => {\n                setMessage(intialMessage)\n              }, 3000)\n            }\n            else {\n              setMessage(fail)\n              setTimeout(() => {\n                setMessage(intialMessage)\n              }, 3000)\n              setPersons(persons.filter(n => n.id !== uUser.id))\n            }\n          })\n      }\n    }\n    else {\n      const success = {\n        text: `user created succesfully`,\n        class: \"message\"\n      }\n      services.create(tempName)\n        .then(newPerson => {\n          setPersons(persons.concat(newPerson))\n          setMessage(success)\n          setTimeout(() => {\n            setMessage(intialMessage)\n          }, 3000)\n        })\n        .catch(err => {\n          const inValid = {\n            text: err.response.data.error,\n            class: \"messageF\"\n          }\n          setMessage(inValid)\n          setTimeout(() => {\n            setMessage(intialMessage)\n          }, 3000)\n        })\n    }\n    setNewName('')\n    setNewNum('')\n  }\n  const filterPersons = persons.filter(\n    persons => {\n      return (persons.name.toLowerCase().includes(field.toLowerCase()));\n    }\n  )\n  return (\n    <div>\n      <h1>Phonebook with backend</h1>\n      <Message message={message} />\n      <h2>Filter from list</h2>\n      <Filter field={field} handleField={handleField} />\n      <h2>Add a new number</h2>\n      <form onSubmit={addPerson}>\n        <div>\n          <PersonForm text='name:' value={newName} changeFn={handleName} />\n          <PersonForm text=\"ph no:\" value={newNum} changeFn={handleNum} />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n      <h2>Numbers</h2>\n      <Persons fn={setPersons} array={persons} filter={filterPersons} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n\n  <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\n"],"sourceRoot":""}